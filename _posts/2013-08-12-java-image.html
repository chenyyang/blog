---
layout: default
title: java 图片处理
categories:
  - java
---

<h2>{{ page.title }}</h2>
<div id="sina_keyword_ad_area2" class="articalContent  ">
			1.获取网络图片
&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr><br>

// new一个URL对象<br>
&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>
URL url = new URL(userIcon);<br>
&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>
// 打开链接<br>
&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>
HttpURLConnection conn = (HttpURLConnection)
url.openConnection();<br>
&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>
// 设置请求方式为"GET"<br>
&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>
conn.setRequestMethod("GET");<br>
&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>
// 超时响应时间为5秒<br>
&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>
conn.setConnectTimeout(5 * 1000);<br>
&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>
// 通过输入流获取图片数据<br>
&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>
InputStream inStream = conn.getInputStream();<br>
<br>
2.将图片输出到文件<br>
<pre>InputStream in = new FileInputStream("D:\\ImageDemo\\WebRoot\\img\\bee.jpg");<br>
                  BufferedImage bi = ImageIO.read(in);<br>
                        File file = new File("D:\\ImageDemo\\WebRoot\\img\\bee1.jpg");<br>
                      bi = bi.getSubimage(x, y, w, h);//截图<br>
                        ImageIO.write(bi, "JPEG", file); <br>
                   in.close();
</pre>
<br>
3.图片上绘制另一张图片<br>
&nbsp;<wbr> BufferedImage outputBarcode = new
BufferedImage(size - removedSize, size - removedSize,
BufferedImage.TYPE_4BYTE_ABGR);<br>
&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>
outputBarcode.getGraphics().drawImage(barcode, 1, 1, size -
removedSize - 1, size - removedSize - 1, removedSize,
removedSize,<br>
&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>
size - removedSize, size - removedSize, null);<br>
<br>
outputBarcode是大图，barcode是图片上面的小图					


<br>
<br><font color="#D9B300">Java代码:</font><br>

<font color="green">

&nbsp;&nbsp;&nbsp; public static void main(String[] arg) throws JSONException, VipException, TException, MipubException, DocumentException, IOException {<br>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;InputStream in = new FileInputStream("/home/yyy/Downloads/xx1.jpg");<br>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;BufferedImage outputBarcode = ImageIO.read(in);<br>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;InputStream in2 = new FileInputStream("/home/yyy/Downloads/xx2.jpg");<br>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;BufferedImage barcode = ImageIO.read(in2);<br>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int size = outputBarcode.getHeight();<br>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int msize = barcode.getHeight();<br>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;outputBarcode.getGraphics().drawImage(barcode, 0, 0, msize, msize, 0, 0,size, size, null);<br>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;File file = new File("/home/chenyang/Downloads/yyy.jpg");<br>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ImageIO.write(outputBarcode, "JPEG", file);<br>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;in.close();<br>

&nbsp;&nbsp;&nbsp;}<br>

</font>



</div>
