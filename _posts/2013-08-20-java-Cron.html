---
layout: default
title: Cron表达式
categories:
  - java
---

<h2>{{ page.title }}</h2>
<div id="sina_keyword_ad_area2" class="articalContent  ">
			<div>
<p>Cron表达式被用来配置CronTrigger实例。 Cron表达式是一个由 7个子表达式组成的字<br>
符串。每个子表达式都描述了一个单独的日程细节。这些子表达式用空格分隔，分别表示：<br>
1. Seconds 秒<br>
2. Minutes 分钟<br>
3. Hours 小时<br>
4. Day-of-Month 月中的天<br>
5. Month 月<br>
6. Day-of-Week 周中的天<br>
7. Year (optional field) 年（可选的域）</p>
<p>s m h dom M dow Y</p>
<p>顺序：右至左路，[年]周月日时分秒<br>
符号：* 任意<br>
/ 增量 a/b 从a开始每次增加b<br>
? 没有值<br>
L 最后一个值<br>
W<br>
# 月中的第几个周几 6#3 第三个周五<br>
- 连续区间至<br>
, 多个值</p>
<p><br>
一个cron表达式的例子字符串为"0 0 12 ? * WED",这表示“每周三的中午 12： 00”。<br>
单个子表达式可以包含范围或者列表。例如：前面例子中的周中的天这个域（这里是<br>
"WED"）可以被替换为"MON-FRI", "MON, WED, FRI"或者甚至"MON-WED,SAT"。<br>
通配符（'*'）可以被用来表示域中“每个”可能的值。因此在"Month"域中的*表示<br>
每个月，而在 Day-Of-Week域中的*则表示“周中的每一天”。<br>
<br>
所有的域中的值都有特定的合法范围，这些值的合法范围相当明显，例如：秒和分域<br>
的合法值为 0到 59，小时的合法范围是 0到 23，Day-of-Month中值得合法凡范围是0<br>
到 31，但是需要注意不同的月份中的天数不同。月份的合法值是0到 11。或者用字符串<br>
JAN,FEB MAR, APR, MAY, JUN, JUL, AUG, SEP, OCT, NOV 及 DEC
来表示。<br>
Days-of-Week可以用1到7来表示 （1=星期日）或者用字符串SUN, MON, TUE, WED,<br>
THU, FRI 和SAT来表示.</p>
<p>'/'字符用来表示值的增量，例如, 如果分钟域中放入'0/15'，它表示“每隔 15 分钟，<br>
从 0开始”，如果在份中域中使用'3/20'，则表示“小时中每隔 20分钟，从第 3分钟开<br>
始”或者另外相同的形式就是'3,23,43'。</p>
<p>'?'字符可以用在day-of-month及 day-of-week域中，它用来表示“没有指定值”。<br>
这对于需要指定一个或者两个域的值而不需要对其他域进行设置来说相当有用。看下面例<br>
子（以及 CronTrigger JavaDOC）会更清楚。</p>
<p>'L'字符可以在 day-of-month及day-of-week中使用，这个字符是"last"的简写，<br>
但是在两个域中的意义不同。例如，在 day-of-month域中的"L"表示这个月的最后一天，<br>
即，一月的 31日，非闰年的二月的 28日。如果它用在 day-of-week中，则表示"7"或<br>
者"SAT"。但是如果在 day-of-week域中，这个字符跟在别的值后面，则表示"当月的最<br>
后的周 XXX"。例如："6L" 或者 "FRIL"都表示本月的最后一个周五。当使用'L'选项时，<br>
最重要的是不要指定列表或者值范围，否则会导致混乱。</p>
<p>'W' 字符用来指定距离给定日最接近的周几（在 day-of-week域中指定）。例如：<br>
如果你为 day-of-month 域指定为"15W",则表示“距离月中 15号最近的周几”。</p>
<p>'#'表示表示月中的第几个周几。例如：day-of-week 域中的"6#3" 或者 "FRI#3"<br>
表示“月中第三个周五”。 下面是一些表达式以及它们的含义，你可以在CronTrigger的JavaDOC 中找大更多</p>
<p><br>
例子。<br>
Example Cron Expressions ——Cron 表达式的例子<br>
CronTrigger 例 1 – 一个简单的每隔 5分钟触发一次的表达式<br>
"0 0/5 * * * ?"<br>
<br>
CronTrigger 例2 – 在每分钟的10秒后每隔5分钟触发一次的表达式(例如. 10:00:10<br>
am, 10:05:10等.)。<br>
"10 0/5 * * * ?"<br>
<br>
CronTrigger 例 3 – 在每个周三和周五的 10：30，11：30，12：30触发的表达式。<br>
"0 30 10-13 ? * WED,FRI"<br>
<br>
CronTrigger 例 4 – 在每个月的 5号， 20号的 8点和 10点之间每隔半个小时触发一次<br>
且不包括 10点，只是 8：30，9：00和 9：30的表达式。<br>
"0 0/30 8-9 5,20 * ?"<br>
<br>
注意，对于单独触发器来说，有些日程需求可能过于复杂而不能用表达式表述，例如：<br>
9：00到10：00之间每隔 5分钟触发一次，下午1：00到 10点每隔 20分钟触发一次。<br>
这个解决方案就是创建两个触发器，两个触发器都运行相同的任务。</p>
</div>							

<br><font color="#D9B300">Java代码:</font><br>
<font color="green">
&nbsp;&nbsp;&nbsp; public static void main(String[] arg) throws JSONException, VipException, TException, MipubException, DocumentException, IOException {<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;InputStream in = new FileInputStream("/home/yyy/Downloads/xx1.jpg");<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;BufferedImage outputBarcode = ImageIO.read(in);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;InputStream in2 = new FileInputStream("/home/yyy/Downloads/xx2.jpg");<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;BufferedImage barcode = ImageIO.read(in2);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int size = outputBarcode.getHeight();<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int msize = barcode.getHeight();<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;outputBarcode.getGraphics().drawImage(barcode, 0, 0, msize, msize, 0, 0,size, size, null);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;File file = new File("/home/chenyang/Downloads/yyy.jpg");<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ImageIO.write(outputBarcode, "JPEG", file);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;in.close();<br>
&nbsp;&nbsp;&nbsp;}<br>
</font>
		
</div>
